[git]
# Enable Conventional Commits parsing (feat, fix, docs, chore, etc.)
conventional_commits = true
filter_unconventional = true
tag_pattern = "^v[0-9].*"

[[git.commit_parsers]]
message = "^feat"
group = "Added"

[[git.commit_parsers]]
message = "^fix"
group = "Fixed"

[[git.commit_parsers]]
message = "^perf|^refactor|^style|^build"
group = "Changed"

[[git.commit_parsers]]
message = "^deprecate"
group = "Deprecated"

[[git.commit_parsers]]
message = "^remove|^breaking"
group = "Removed"

[[git.commit_parsers]]
message = "^security"
group = "Security"

[[git.commit_parsers]]
message = "^docs"
group = "Documentation"

[[git.commit_parsers]]
message = "^ci|^chore|^test"
group = "Misc"

[[git.commit_parsers]]
message = ".*"
skip = true

[changelog]
header = """
# Changelog

All notable changes to this project will be documented in this file.

The format is based on Keep a Changelog (https://keepachangelog.com/en/1.1.0/),
and this project adheres to Semantic Versioning (https://semver.org/spec/v2.0.0.html).
"""

body = """
{% if version %}
## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
{% else %}
## [Unreleased]
{% endif %}
{% for group, commits in commits | group_by(attribute="group") %}
### {{ group }}
{% for commit in commits %}
- {{ commit.message | split(pat='\n') | first | trim | capitalize }} ({{ commit.id | truncate(length=7) }})
{% endfor %}
{% endfor %}
"""

footer = """
"""

trim = true
